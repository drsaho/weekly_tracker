<!DOCTYPE html>
<html lang="en">
<head>
  <!-- meta + responsive defaults -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- page title -->
  <title>Weekly Weight Tracker — 12 Week Plan</title>
  <!-- link stylesheet -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- app headline -->
  <h1>Weekly Weight Tracker — 12 Week Plan</h1>

  <!-- plan setup controls -->
  <section>
    <label for="starting-weight"><strong>Starting Weight (lb)</strong></label>
    <input id="starting-weight" type="number" step="0.1" min="1" placeholder="e.g., 290" />
    <button id="generate-plan">Generate 12-Week Goals (-2 lb/week)</button>
    <button id="clear-plan" class="ghost">Clear Plan</button>
    <p id="plan-hint" style="margin-top:6px;color:#555">
      Example: starting 290 → goals: 288, 286, 284 … for 12 weeks. Set date in row 1 to auto-fill weekly dates.
    </p>
  </section>

  <!-- tdee calculator (Mifflin–St Jeor) -->
  <h2>Calories</h2>
  <section id="tdee-section">
    <!-- unit toggle -->
    <label for="unit-mode"><strong>Units</strong></label>
    <select id="unit-mode" title="Unit system">
      <option value="us">US (ft/in, lb)</option>
      <option value="metric">Metric (cm, kg)</option>
    </select>

    <!-- sex -->
    <label for="tdee-sex"><strong>Sex</strong></label>
    <select id="tdee-sex">
      <option value="male">Male</option>
      <option value="female">Female</option>
    </select>

    <!-- age -->
    <label for="tdee-age"><strong>Age</strong></label>
    <input id="tdee-age" type="number" min="10" max="120" step="1" placeholder="e.g., 29" />

    <!-- height (US) -->
    <div class="unit-us">
      <label for="tdee-height-ft"><strong>Height</strong></label>
      <input id="tdee-height-ft" type="number" min="3" max="8" step="1" placeholder="ft" style="width:70px;" />
      <input id="tdee-height-in" type="number" min="0" max="11" step="1" placeholder="in" style="width:80px;" />
    </div>

    <!-- height (Metric) -->
    <div class="unit-metric" hidden>
      <label for="tdee-height-cm"><strong>Height</strong></label>
      <input id="tdee-height-cm" type="number" min="120" max="250" step="0.5" placeholder="cm" style="width:110px;" />
    </div>

    <!-- weight (US) -->
    <div class="unit-us">
      <label for="tdee-weight-lb"><strong>Weight</strong></label>
      <input id="tdee-weight-lb" type="number" min="50" max="1000" step="0.1" placeholder="lb" style="width:110px;" />
    </div>

    <!-- weight (Metric) -->
    <div class="unit-metric" hidden>
      <label for="tdee-weight-kg"><strong>Weight</strong></label>
      <input id="tdee-weight-kg" type="number" min="30" max="450" step="0.1" placeholder="kg" style="width:110px;" />
    </div>

    <!-- activity -->
    <label for="tdee-activity"><strong>Activity</strong></label>
    <select id="tdee-activity" title="Activity multiplier">
      <option value="1.2">Sedentary (little/no exercise)</option>
      <option value="1.375">Light (1–3 days/wk)</option>
      <option value="1.55">Moderate (3–5 days/wk)</option>
      <option value="1.725">Very Active (6–7 days/wk)</option>
      <option value="1.9">Extra (hard job + training)</option>
    </select>

    <!-- loss rate -->
    <label for="loss-rate"><strong>Target Loss</strong></label>
    <input id="loss-rate" type="number" min="0" max="3" step="0.1" value="2.0" style="width:110px;" />
    <span>lb/week</span>

    <!-- calculate -->
    <button id="calc-tdee">Calculate</button>
    <span id="tdee-output" style="margin-left:8px;color:#333;">TDEE: —</span>
  </section>

  <p id="calorie-target-line" style="margin:6px 0 8px;color:#333;">
    Daily Target: —
  </p>
  <p id="calorie-note" style="margin:-6px 0 8px;color:#666;font-size:13px;">
    Uses Mifflin–St Jeor BMR × activity. Daily deficit = 500 × loss(lb/week). Consider medical guidance for aggressive goals.
  </p>

  <!-- inputs table -->
  <h2>Weekly Entries</h2>
  <table id="entries">
    <thead>
      <tr>
        <th>#</th>
        <th>Date</th>
        <th>Time</th>
        <th>Goal (lb)</th>
        <th>Current (lb)</th>
        <th>Body Fat %</th>
        <th>Muscle Mass</th>
        <th>Water %</th>
        <th>Blood Pressure</th>
        <th>Waist (in)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- progress stats -->
  <h2>Progress</h2>
  <div id="stats" class="stats">
    <div><span class="k">Start:</span> <span id="stat-start">—</span></div>
    <div><span class="k">Latest:</span> <span id="stat-latest">—</span></div>
    <div><span class="k">Total Change:</span> <span id="stat-total">—</span></div>
    <div><span class="k">Avg / Week:</span> <span id="stat-avg">—</span></div>
  </div>

  <!-- charts grid -->
  <h2 style="margin-top:12px;">Trends</h2>
  <div class="charts">
    <!-- left: absolute weight trend -->
    <canvas id="trend" width="900" height="300" aria-label="Weight trend"></canvas>

    <!-- right: multi-metric trend (normalized scales) -->
    <canvas id="trendMulti" width="900" height="300" aria-label="Multi-metric trend"></canvas>
  </div>
  <p style="color:#666; margin-top:6px;">
    Note: right chart uses per-series auto-scaling to compare trends across different units.
  </p>

  <!-- series visibility toggles -->
  <div class="series-controls">
    <label><input type="checkbox" id="vis-current" checked /> Weight (lb)</label>
    <label><input type="checkbox" id="vis-bodyFat" checked /> Body Fat (%)</label>
    <label><input type="checkbox" id="vis-muscle" /> Muscle (lb or %)</label>
    <label><input type="checkbox" id="vis-water" /> Water (%)</label>
    <label><input type="checkbox" id="vis-bpSys" /> BP Systolic</label>
    <label><input type="checkbox" id="vis-bpDia" /> BP Diastolic</label>
    <label><input type="checkbox" id="vis-waist" checked /> Waist (in)</label>
  </div>

  <!-- main script -->
  <script src="app.js"></script>
</body>
</html>
